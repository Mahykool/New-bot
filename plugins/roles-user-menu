// plugins/roles-user-menu.js
import { getUserRoles, getUserLevel, listRoles } from '../lib/lib-roles.js'

const handler = async (m, { conn }) => {
    const jid = m.sender
    const roles = getUserRoles(jid)
    const level = getUserLevel(jid)
    const allRoles = listRoles()

    let txt = `ðŸŽ­ *MENÃš DE ROLES*\n\n`

    txt += `ðŸ‘¤ *Tus roles:* ${roles.length ? roles.join(', ') : 'Ninguno'}\n`
    txt += `ðŸ“Š *Tu nivel:* ${level}\n\n`

    txt += `ðŸ“Œ *Roles disponibles:*\n\n`
    for (const r of allRoles) {
        txt += `${r.icon || ''} *${r.role}*\n`
        txt += `â€¢ Nivel: ${r.level}\n`
        txt += `â€¢ ${r.description}\n\n`
    }

    return m.reply(txt)
}

handler.command = ['rolesmenu', 'mynivel', 'mystatus']
handler.tags = ['roles']

export default handler
